{"ast":null,"code":"import _regeneratorRuntime from \"C:/xampp/htdocs/pos/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/xampp/htdocs/pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport NavComponent from '../Extras/NavComponent';\nimport HttpService from '../../Servicios/HttpService';\nexport default {\n  name: \"ClientesComponent\",\n  components: {\n    NavComponent: NavComponent\n  },\n  data: function data() {\n    return {\n      cargando: false,\n      clientes: []\n    };\n  },\n  mounted: function mounted() {\n    this.obtenerClientes();\n  },\n  methods: {\n    eliminar: function eliminar(idCliente) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.$buefy.dialog.confirm({\n                  title: 'Eliminar cliente',\n                  message: 'Seguro que quieres <b>eliminar</b> este cliente? Esta acción no se puede revertir.',\n                  confirmText: 'Sí, eliminar',\n                  cancelText: 'Cancelar',\n                  type: 'is-danger',\n                  hasIcon: true,\n                  onConfirm: function onConfirm() {\n                    _this.cargando = true;\n                    HttpService.eliminar('clientes.php', {\n                      accion: 'eliminar',\n                      id: idCliente\n                    }).then(function (resultado) {\n                      if (!resultado) {\n                        _this.$buefy.toast.open('Error al eliminar');\n\n                        _this.cargando = false;\n                        return;\n                      }\n\n                      if (resultado) {\n                        _this.cargando = false;\n\n                        _this.$buefy.toast.open({\n                          type: 'is-info',\n                          message: 'Cliente eliminado.'\n                        });\n\n                        _this.obtenerClientes();\n                      }\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    editar: function editar(idCliente) {\n      this.$router.push({\n        name: \"EditarCliente\",\n        params: {\n          id: idCliente\n        }\n      });\n    },\n    obtenerClientes: function obtenerClientes() {\n      var _this2 = this;\n\n      this.cargando = true;\n      var payload = {\n        accion: \"obtener\"\n      };\n      HttpService.obtenerConConsultas(\"clientes.php\", payload).then(function (clientes) {\n        _this2.clientes = clientes;\n        _this2.cargando = false;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AAEA;EACAA,yBADA;EAEAC;IAAAC;EAAA,CAFA;EAIAC;IAAA;MACAC,eADA;MAEAC;IAFA;EAAA,CAJA;EASAC,OATA,qBASA;IACA;EACA,CAXA;EAaAC;IACAC,QADA,oBACAC,SADA,EACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACAC,yBADA;kBAEAC,6FAFA;kBAGAC,2BAHA;kBAIAC,sBAJA;kBAKAC,iBALA;kBAMAC,aANA;kBAOAC;oBACA;oBACAC;sBACAC,kBADA;sBAEAC;oBAFA,GAIAC,IAJA,CAIA;sBACA;wBACA;;wBACA;wBACA;sBACA;;sBAEA;wBACA;;wBACA;0BACAN,eADA;0BAEAH;wBAFA;;wBAIA;sBACA;oBACA,CAnBA;kBAoBA;gBA7BA;;cADA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAgCA,CAjCA;IAmCAU,MAnCA,kBAmCAZ,SAnCA,EAmCA;MACA;QACAT,qBADA;QAEAsB;UAAAH;QAAA;MAFA;IAIA,CAxCA;IA0CAI,eA1CA,6BA0CA;MAAA;;MACA;MACA;QACAL;MADA;MAIAD,yDACAG,IADA,CACA;QACA;QACA;MACA,CAJA;IAKA;EArDA;AAbA","names":["name","components","NavComponent","data","cargando","clientes","mounted","methods","eliminar","idCliente","title","message","confirmText","cancelText","type","hasIcon","onConfirm","HttpService","accion","id","then","editar","params","obtenerClientes"],"sourceRoot":"src/components/Clientes","sources":["ClientesComponent.vue"],"sourcesContent":["<template>\r\n\t<section>\r\n\t\t<nav-component :titulo=\"'Clientes'\" :link=\"{ path: '/agregar-cliente' }\" :texto=\"'Agregar cliente'\" />\r\n\t\t<b-table\r\n\t\t:data=\"clientes\">\r\n\t\t\t<b-table-column field=\"nombre\" label=\"Nombre del cliente\" sortable searchable v-slot=\"props\">\r\n\t\t\t\t{{ props.row.nombre }}\r\n\t\t\t</b-table-column>\r\n\r\n\t\t\t<b-table-column field=\"telefono\" label=\"Teléfono\" sortable searchable v-slot=\"props\">\r\n\t\t\t\t{{ props.row.telefono }}\r\n\t\t\t</b-table-column>\r\n\r\n\t\t\t<b-table-column field=\"eliminar\" label=\"Eliminar\" v-slot=\"props\">\r\n\t\t\t\t<b-button type=\"is-danger\" icon-left=\"delete\" @click=\"eliminar(props.row.id)\">Eliminar</b-button>\r\n\t\t\t</b-table-column>\r\n\r\n\t\t\t<b-table-column field=\"editar\" label=\"Editar\" v-slot=\"props\">\r\n\t\t\t\t<b-button type=\"is-info\" icon-left=\"pen\" @click=\"editar(props.row.id)\">Editar</b-button>\r\n\t\t\t</b-table-column>\r\n\t\t</b-table>\r\n\t\t<b-loading :is-full-page=\"true\" v-model=\"cargando\" :can-cancel=\"false\"></b-loading>\r\n\t</section>\r\n</template>\r\n<script>\r\n\timport NavComponent from '../Extras/NavComponent'\r\n\timport HttpService from '../../Servicios/HttpService'\r\n\r\n\texport default{\r\n\t\tname: \"ClientesComponent\",\r\n\t\tcomponents: { NavComponent },\r\n\r\n\t\tdata:()=>({\r\n\t\t\tcargando: false,\r\n\t\t\tclientes: []\r\n\t\t}),\r\n\r\n\t\tmounted(){\r\n\t\t\tthis.obtenerClientes()\r\n\t\t},\r\n\r\n\t\tmethods:{\r\n\t\t\tasync eliminar(idCliente){\r\n                this.$buefy.dialog.confirm({\r\n                    title: 'Eliminar cliente',\r\n                    message: 'Seguro que quieres <b>eliminar</b> este cliente? Esta acción no se puede revertir.',\r\n                    confirmText: 'Sí, eliminar',\r\n                    cancelText: 'Cancelar',\r\n                    type: 'is-danger',\r\n                    hasIcon: true,\r\n                    onConfirm: () => {\r\n                        this.cargando = true\r\n                        HttpService.eliminar('clientes.php',{\r\n                            accion: 'eliminar',\r\n                            id: idCliente\r\n                        })\r\n                        .then(resultado => {\r\n                            if(!resultado) {\r\n                                this.$buefy.toast.open('Error al eliminar')\r\n                                this.cargando = false\r\n                                return\r\n                            }\r\n\r\n                            if(resultado){\r\n                                this.cargando = false\r\n                                this.$buefy.toast.open({\r\n                                    type: 'is-info',\r\n                                    message: 'Cliente eliminado.'\r\n                                })\r\n                                this.obtenerClientes()\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n\r\n\t\t\teditar(idCliente){\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: \"EditarCliente\",\r\n\t\t\t\t\tparams: { id: idCliente}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tobtenerClientes(){\r\n\t\t\t\tthis.cargando = true\r\n\t\t\t\tlet payload = {\r\n\t\t\t\t\taccion: \"obtener\",\r\n\t\t\t\t}\r\n\r\n\t\t\t\tHttpService.obtenerConConsultas(\"clientes.php\", payload)\r\n\t\t\t\t.then(clientes =>{\r\n\t\t\t\t\tthis.clientes = clientes\r\n\t\t\t\t\tthis.cargando = false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>"]},"metadata":{},"sourceType":"module"}