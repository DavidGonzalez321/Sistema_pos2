{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AyudanteSesion from '../../Servicios/AyudanteSesion';\nimport Utiles from '../../Servicios/Utiles';\nimport Printd from \"printd\";\nexport default {\n  name: \"ComprobanteCompra\",\n  props: [\"venta\", \"tipo\"],\n  data: function data() {\n    return {\n      titulo: \"\",\n      datosNegocio: null,\n      cssText: \"\\n            .comprobante{\\n                width: 250px;\\n                font-family: monospace;\\n                font-size: 14px;\\n            }\\n\\n            .comprobante > p{\\n                margin: 0!important;\\n                padding: 0!important;\\n                text-align: center;\\n            }\\n\\n            .comprobante > img{\\n                display: block;\\n                margin: 0 auto;\\n            }\\n\\n            .comprobante > th, td {\\n              border-bottom: 1px solid #ddd;\\n              font-size: 12px !important;\\n              margin: 0!important;\\n              padding: 0!important;\\n            }\\n        \"\n    };\n  },\n  beforeMount: function beforeMount() {\n    this.generarTitulo();\n    this.obtenerDatosNegocio();\n  },\n  mounted: function mounted() {\n    this.d = new Printd();\n\n    var _this$d$getIFrame = this.d.getIFrame(),\n        contentWindow = _this$d$getIFrame.contentWindow;\n\n    contentWindow.addEventListener(\"beforeprint\", function () {\n      return console.log(\"before print event!\");\n    });\n    contentWindow.addEventListener(\"afterprint\", function () {\n      return console.log(\"after print event!\");\n    });\n    this.imprimir();\n  },\n  methods: {\n    generarTitulo: function generarTitulo() {\n      switch (this.tipo) {\n        case \"venta\":\n          this.titulo = \"COMPROBANTE DE COMPRA\";\n          break;\n\n        case \"cuenta\":\n          this.titulo = \"COMPROBANTE DE CUENTA\";\n          break;\n\n        case \"apartado\":\n          this.titulo = \"COMPROBANTE DE APARTADO\";\n          break;\n\n        case \"cotiza\":\n          this.titulo = \"COTIZACIÓN\";\n          break;\n\n        default:\n          this.titulo = \"COMPROBANTE\";\n      }\n    },\n    obtenerDatosNegocio: function obtenerDatosNegocio() {\n      this.datosNegocio = AyudanteSesion.obtenerDatosNegocio();\n      this.datosNegocio.logo = Utiles.regresarRuta() + this.datosNegocio.logo;\n    },\n    imprimir: function imprimir() {\n      var _this = this;\n\n      var zona = document.getElementById(\"comprobante\");\n      setTimeout(function () {\n        return _this.d.print(zona, [_this.cssText]);\n      }, 10);\n      this.$emit(\"impreso\", false);\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AAIA;EACAA,yBADA;EAEAC,wBAFA;EAIAC;IAAA;MACAC,UADA;MAEAC,kBAFA;MAGAC;IAHA;EAAA,CAJA;EAmCAC,WAnCA,yBAmCA;IACA;IACA;EACA,CAtCA;EAwCAC,OAxCA,qBAwCA;IAGA;;IACA;IAAA;;IACAC;MAAA,OACAC,kCADA;IAAA;IAGAD;MAAA,OACAC,iCADA;IAAA;IAIA;EACA,CArDA;EAuDAC;IACAC,aADA,2BACA;MACA;QACA;UACA;UACA;;QACA;UACA;UACA;;QAEA;UACA;UACA;;QAEA;UACA;UACA;;QAEA;UACA;MAjBA;IAmBA,CArBA;IAuBAC,mBAvBA,iCAuBA;MACA;MACA;IACA,CA1BA;IA4BAC,QA5BA,sBA4BA;MAAA;;MACA;MACAC;QAAA;MAAA;MACA;IACA;EAhCA;AAvDA","names":["name","props","data","titulo","datosNegocio","cssText","beforeMount","mounted","contentWindow","console","methods","generarTitulo","obtenerDatosNegocio","imprimir","setTimeout"],"sourceRoot":"src/components/Ventas","sources":["ComprobanteCompra.vue"],"sourcesContent":["<template>\r\n    <section>\r\n        <div class=\"comprobante\" id=\"comprobante\" v-if=\"datosNegocio\">\r\n            <p><b>{{ titulo }}</b></p>\r\n            <p>{{ datosNegocio.nombre }} Teléfono: {{ datosNegocio.telefono }}</p>\r\n            <img :src=\"datosNegocio.logo\" alt=\"Aqui el logo\" width=\"30\">\r\n            <p><b>Cliente:</b>{{ venta.nombreCliente }}</p>\r\n            <p><b>Atiende:</b>{{ venta.nombreUsuario }}</p>\r\n            <p><b>Fecha: </b>{{ venta.fecha }}</p>\r\n            <table>\r\n                <thead>\r\n                    <th>Producto</th>\r\n                    <th></th>\r\n                    <th>Total</th>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(producto, index) in venta.productos\" :key=\"index\">\r\n                        <td>{{ producto.nombre }}</td>\r\n                        <td>${{ producto.precio}} X {{ producto.cantidad }}</td>\r\n                        <td>${{ producto.precio * producto.cantidad }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <p><b>Total:</b>${{ venta.total }}</p>\r\n            <p v-if=\"tipo !== 'cotiza'\"><b>Su pago:</b>${{ venta.pagado }}</p>\r\n            <p v-if=\"tipo === 'venta'\"><b>Cambio:</b>${{ venta.pagado - venta.total }}</p>\r\n            <p v-if=\"tipo === 'cuenta' || tipo === 'apartado'\"><b>Por pagar:</b>${{ venta.porPagar }}</p>\r\n            <p><b>Gracias por su preferencia</b></p>\r\n            <p>----------------------------</p>\r\n            <p>Sistema de ventas por</p>\r\n            <img src=\"@/assets/logo.png\" width=\"120\">\r\n        </div>\r\n    </section>\r\n</template>\r\n<script>\r\n    import AyudanteSesion from '../../Servicios/AyudanteSesion'\r\n    import Utiles from '../../Servicios/Utiles'\r\n    import Printd from \"printd\";\r\n\r\n    \r\n\r\n    export default{\r\n        name: \"ComprobanteCompra\",\r\n        props: [\"venta\", \"tipo\"],\r\n\r\n        data:()=>({\r\n            titulo: \"\",\r\n            datosNegocio: null,\r\n            cssText: `\r\n                .comprobante{\r\n                    width: 250px;\r\n                    font-family: monospace;\r\n                    font-size: 14px;\r\n                }\r\n\r\n                .comprobante > p{\r\n                    margin: 0!important;\r\n                    padding: 0!important;\r\n                    text-align: center;\r\n                }\r\n\r\n                .comprobante > img{\r\n                    display: block;\r\n                    margin: 0 auto;\r\n                }\r\n\r\n                .comprobante > th, td {\r\n                  border-bottom: 1px solid #ddd;\r\n                  font-size: 12px !important;\r\n                  margin: 0!important;\r\n                  padding: 0!important;\r\n                }\r\n            `,\r\n\r\n        }),\r\n\r\n        beforeMount(){\r\n            this.generarTitulo()\r\n            this.obtenerDatosNegocio()\r\n        },\r\n\r\n        mounted(){\r\n            \r\n\r\n            this.d = new Printd();\r\n            const { contentWindow } = this.d.getIFrame();\r\n            contentWindow.addEventListener(\"beforeprint\", () =>\r\n              console.log(\"before print event!\")\r\n            );\r\n            contentWindow.addEventListener(\"afterprint\", () =>\r\n              console.log(\"after print event!\")\r\n            );\r\n\r\n            this.imprimir();\r\n        },\r\n\r\n        methods:{\r\n            generarTitulo(){\r\n                switch(this.tipo){\r\n                    case \"venta\":\r\n                        this.titulo = \"COMPROBANTE DE COMPRA\"\r\n                        break\r\n                    case \"cuenta\":\r\n                        this.titulo = \"COMPROBANTE DE CUENTA\"\r\n                        break\r\n\r\n                    case \"apartado\":\r\n                        this.titulo = \"COMPROBANTE DE APARTADO\"\r\n                        break\r\n\r\n                    case \"cotiza\":\r\n                        this.titulo = \"COTIZACIÓN\"\r\n                        break\r\n\r\n                    default:\r\n                        this.titulo = \"COMPROBANTE\"\r\n                }\r\n            },\r\n\r\n            obtenerDatosNegocio(){\r\n                this.datosNegocio = AyudanteSesion.obtenerDatosNegocio()\r\n                this.datosNegocio.logo = Utiles.regresarRuta() + this.datosNegocio.logo\r\n            },\r\n\r\n            imprimir() {\r\n              let zona = document.getElementById(\"comprobante\");\r\n              setTimeout(() => this.d.print(zona, [this.cssText]), 10);\r\n              this.$emit(\"impreso\", false);\r\n            },\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    .comprobante{\r\n        width: 250px;\r\n        font-family: monospace;\r\n        font-size: 14px;\r\n    }\r\n\r\n    .comprobante > p{\r\n        margin: 0!important;\r\n        padding: 0!important;\r\n        text-align: center;\r\n    }\r\n\r\n    .comprobante > img{\r\n        display: block;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .comprobante > th, td {\r\n      border-bottom: 1px solid #ddd;\r\n      font-size: 12px !important;\r\n      margin: 0!important;\r\n      padding: 0!important;\r\n    }\r\n    \r\n</style>"]},"metadata":{},"sourceType":"module"}