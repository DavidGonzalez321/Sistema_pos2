{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport HttpService from '../../Servicios/HttpService';\nimport Utiles from '../../Servicios/Utiles';\nimport SelectAnio from '../Extras/SelectAnio';\nimport NavComponent from '../Extras/NavComponent';\nimport CartasTotales from '../Extras/CartasTotales';\nexport default {\n  name: \"PerfilComponent\",\n  components: {\n    NavComponent: NavComponent,\n    CartasTotales: CartasTotales,\n    SelectAnio: SelectAnio\n  },\n  data: function data() {\n    return {\n      nombreUsuario: \"\",\n      ingresos: [],\n      anioSeleccionado: new Date().getFullYear(),\n      totalesMeses: []\n    };\n  },\n  mounted: function mounted() {\n    this.nombreUsuario = localStorage.getItem('nombre');\n    this.obtenerIngresos();\n    this.obtenerTotalesMeses(this.anioSeleccionado);\n  },\n  methods: {\n    busquedaAnio: function busquedaAnio(datos) {\n      this.obtenerTotalesMeses(datos.anio);\n    },\n    obtenerTotalesMeses: function obtenerTotalesMeses(anio) {\n      var _this = this;\n\n      HttpService.obtenerConConsultas('perfil.php', {\n        accion: 'obtener_ventas',\n        anioSeleccionado: anio,\n        idUsuario: localStorage.getItem('id')\n      }).then(function (resultado) {\n        _this.totalesMeses = Utiles.cambiarNumeroANombreMes(resultado);\n\n        _this.crearGraficaVentasMeses(_this.totalesMeses);\n      });\n    },\n    crearGraficaVentasMeses: function crearGraficaVentasMeses(array) {\n      Utiles.generarGrafica('bar', array, \"#contenedor-meses\", \"#grafica-meses\", \"grafica-meses\");\n    },\n    obtenerIngresos: function obtenerIngresos() {\n      var _this2 = this;\n\n      HttpService.obtenerConConsultas('perfil.php', {\n        accion: 'obtener_ingresos',\n        idUsuario: localStorage.getItem('id')\n      }).then(function (resultado) {\n        _this2.crearCartas(resultado);\n      });\n    },\n    crearCartas: function crearCartas(ingresos) {\n      this.ingresos = [{\n        nombre: \"Total ingresos\",\n        total: '$' + ingresos.totalIngresos,\n        icono: \"currency-usd\",\n        clase: \"has-text-success\"\n      }, {\n        nombre: \"Ingresos hoy\",\n        total: '$' + ingresos.ingresosHoy,\n        icono: \"calendar\",\n        clase: \"has-text-primary\"\n      }, {\n        nombre: \"Ingresos semana\",\n        total: '$' + ingresos.ingresosSemana,\n        icono: \"calendar-range\",\n        clase: \"has-text-info\"\n      }, {\n        nombre: \"Ingresos mes\",\n        total: '$' + ingresos.ingresosMes,\n        icono: \"calendar-month\",\n        clase: \"has-text-dark\"\n      }];\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;EACAA,uBADA;EAEAC;IAAAC;IAAAC;IAAAC;EAAA,CAFA;EAIAC;IAAA;MACAC,iBADA;MAEAC,YAFA;MAGAC,0CAHA;MAIAC;IAJA;EAAA,CAJA;EAWAC,OAXA,qBAWA;IACA;IACA;IACA;EACA,CAfA;EAiBAC;IACAC,YADA,wBACAC,KADA,EACA;MACA;IACA,CAHA;IAKAC,mBALA,+BAKAC,IALA,EAKA;MAAA;;MACAC;QACAC,wBADA;QAEAT,sBAFA;QAGAU;MAHA,GAKAC,IALA,CAKA;QACA;;QACA;MACA,CARA;IASA,CAfA;IAiBAC,uBAjBA,mCAiBAC,KAjBA,EAiBA;MACAC;IACA,CAnBA;IAqBAC,eArBA,6BAqBA;MAAA;;MACAP;QACAC,0BADA;QAEAC;MAFA,GAIAC,IAJA,CAIA;QACA;MACA,CANA;IAOA,CA7BA;IA+BAK,WA/BA,uBA+BAjB,QA/BA,EA+BA;MACA,iBACA;QAAAkB;QAAAC;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,CAFA,EAGA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,CAHA,EAIA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,CAJA;IAMA;EAtCA;AAjBA","names":["name","components","NavComponent","CartasTotales","SelectAnio","data","nombreUsuario","ingresos","anioSeleccionado","totalesMeses","mounted","methods","busquedaAnio","datos","obtenerTotalesMeses","anio","HttpService","accion","idUsuario","then","crearGraficaVentasMeses","array","Utiles","obtenerIngresos","crearCartas","nombre","total","icono","clase"],"sourceRoot":"src/components/Usuarios","sources":["PerfilComponent.vue"],"sourcesContent":["<template>\r\n\t<section>\r\n\t\t<nav-component :titulo=\"nombreUsuario\" :link=\"{ path: '/cambiar-password' }\" :texto=\"'Cambiar contraseÃ±a'\" />\r\n\t\t<cartas-totales :totales=\"ingresos\" />\r\n\t\t<div class=\"box\">\r\n            <p class=\"title is-4\">Tus ventas por meses</p>\r\n            <select-anio :grafica=\"'1'\" @seleccionado=\"busquedaAnio\"/>\r\n            <div id=\"contenedor-meses\">\r\n                <canvas id=\"grafica-meses\"></canvas>\r\n            </div>\r\n        </div>\r\n\t</section>\r\n</template>\r\n<script>\r\n\timport HttpService from '../../Servicios/HttpService'\r\n\timport Utiles from '../../Servicios/Utiles'\r\n\timport SelectAnio from '../Extras/SelectAnio'\r\n\timport NavComponent from '../Extras/NavComponent'\r\n\timport CartasTotales from '../Extras/CartasTotales'\r\n\texport default{\r\n\t\tname: \"PerfilComponent\",\r\n\t\tcomponents: { NavComponent, CartasTotales, SelectAnio },\r\n\r\n\t\tdata: ()=>({\r\n\t\t\tnombreUsuario: \"\",\r\n\t\t\tingresos: [],\r\n\t\t\tanioSeleccionado: new Date().getFullYear(),\r\n\t\t\ttotalesMeses: []\r\n\t\t}),\r\n\r\n\t\tmounted(){\r\n\t\t\tthis.nombreUsuario = localStorage.getItem('nombre')\r\n\t\t\tthis.obtenerIngresos()\r\n\t\t\tthis.obtenerTotalesMeses(this.anioSeleccionado)\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tbusquedaAnio(datos){\r\n\t\t\t\tthis.obtenerTotalesMeses(datos.anio)\r\n\t\t\t},\r\n\r\n\t\t\tobtenerTotalesMeses(anio){\r\n                HttpService.obtenerConConsultas('perfil.php',{\r\n                    accion: 'obtener_ventas',\r\n                    anioSeleccionado: anio,\r\n                    idUsuario: localStorage.getItem('id')\r\n                })\r\n                .then(resultado => {\r\n                    this.totalesMeses = Utiles.cambiarNumeroANombreMes(resultado)\r\n                    this.crearGraficaVentasMeses(this.totalesMeses)\r\n                }) \r\n            },\r\n\r\n            crearGraficaVentasMeses(array){\r\n                Utiles.generarGrafica('bar', array, \"#contenedor-meses\", \"#grafica-meses\", \"grafica-meses\")\r\n            },\r\n\r\n\t\t\tobtenerIngresos(){\r\n                HttpService.obtenerConConsultas('perfil.php',{\r\n                    accion: 'obtener_ingresos',\r\n                    idUsuario: localStorage.getItem('id')\r\n                })\r\n                .then(resultado => {\r\n                    this.crearCartas(resultado)\r\n                })\r\n            },\r\n\r\n            crearCartas(ingresos){\r\n                this.ingresos = [\r\n                    {nombre: \"Total ingresos\", total: '$' + ingresos.totalIngresos, icono: \"currency-usd\", clase: \"has-text-success\"},\r\n                    {nombre: \"Ingresos hoy\", total: '$' + ingresos.ingresosHoy, icono: \"calendar\", clase: \"has-text-primary\"},\r\n                    {nombre: \"Ingresos semana\", total: '$' + ingresos.ingresosSemana, icono: \"calendar-range\", clase: \"has-text-info\"},\r\n                    {nombre: \"Ingresos mes\", total: '$' + ingresos.ingresosMes, icono: \"calendar-month\", clase: \"has-text-dark\"}\r\n                    ]\r\n            },\r\n\t\t}\r\n\r\n\t\t\r\n\t}\r\n</script>"]},"metadata":{},"sourceType":"module"}