{"ast":null,"code":"import _regeneratorRuntime from \"C:/xampp/htdocs/pos/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/xampp/htdocs/pos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport MensajeInicial from '../Extras/MensajeInicial';\nimport NavComponent from '../Extras/NavComponent';\nimport HttpService from '../../Servicios/HttpService';\nexport default {\n  name: \"UsuariosComponent\",\n  components: {\n    MensajeInicial: MensajeInicial,\n    NavComponent: NavComponent\n  },\n  data: function data() {\n    return {\n      cargando: false,\n      usuarios: []\n    };\n  },\n  mounted: function mounted() {\n    this.obtenerUsuarios();\n  },\n  methods: {\n    eliminar: function eliminar(idUsuario) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.$buefy.dialog.confirm({\n                  title: 'Eliminar usuario',\n                  message: 'Seguro que quieres <b>eliminar</b> este usuario? Esta acción no se puede revertir.',\n                  confirmText: 'Sí, eliminar',\n                  cancelText: 'Cancelar',\n                  type: 'is-danger',\n                  hasIcon: true,\n                  onConfirm: function onConfirm() {\n                    _this.cargando = true;\n                    HttpService.eliminar('usuarios.php', {\n                      accion: 'eliminar',\n                      id: idUsuario\n                    }).then(function (resultado) {\n                      if (!resultado) {\n                        _this.$buefy.toast.open('Error al eliminar');\n\n                        _this.cargando = false;\n                        return;\n                      }\n\n                      if (resultado) {\n                        _this.cargando = false;\n\n                        _this.$buefy.toast.open({\n                          type: 'is-info',\n                          message: 'Usuario eliminado.'\n                        });\n\n                        _this.obtenerUsuarios();\n                      }\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    editar: function editar(idUsuario) {\n      this.$router.push({\n        name: \"EditarUsuario\",\n        params: {\n          id: idUsuario\n        }\n      });\n    },\n    obtenerUsuarios: function obtenerUsuarios() {\n      var _this2 = this;\n\n      this.cargando = true;\n      var payload = {\n        accion: 'obtener'\n      };\n      HttpService.obtenerConConsultas('usuarios.php', payload).then(function (usuarios) {\n        _this2.usuarios = usuarios;\n        _this2.cargando = false;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AAEA;EACAA,yBADA;EAEAC;IAAAC;IAAAC;EAAA,CAFA;EAIAC;IAAA;MACAC,eADA;MAEAC;IAFA;EAAA,CAJA;EASAC,OATA,qBASA;IACA;EACA,CAXA;EAaAC;IACAC,QADA,oBACAC,SADA,EACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACAC,yBADA;kBAEAC,6FAFA;kBAGAC,2BAHA;kBAIAC,sBAJA;kBAKAC,iBALA;kBAMAC,aANA;kBAOAC;oBACA;oBACAC;sBACAC,kBADA;sBAEAC;oBAFA,GAIAC,IAJA,CAIA;sBACA;wBACA;;wBACA;wBACA;sBACA;;sBAEA;wBACA;;wBACA;0BACAN,eADA;0BAEAH;wBAFA;;wBAIA;sBACA;oBACA,CAnBA;kBAoBA;gBA7BA;;cADA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAgCA,CAjCA;IAmCAU,MAnCA,kBAmCAZ,SAnCA,EAmCA;MACA;QACAV,qBADA;QAEAuB;UAAAH;QAAA;MAFA;IAIA,CAxCA;IA0CAI,eA1CA,6BA0CA;MAAA;;MACA;MACA;QACAL;MADA;MAGAD,yDACAG,IADA,CACA;QACA;QACA;MACA,CAJA;IAKA;EApDA;AAbA","names":["name","components","MensajeInicial","NavComponent","data","cargando","usuarios","mounted","methods","eliminar","idUsuario","title","message","confirmText","cancelText","type","hasIcon","onConfirm","HttpService","accion","id","then","editar","params","obtenerUsuarios"],"sourceRoot":"src/components/Usuarios","sources":["UsuariosComponent.vue"],"sourcesContent":["<template>\r\n    <section>\r\n        <nav-component :titulo=\"'Usuarios'\" :link=\"{ path: '/agregar-usuario' }\" :texto=\"'Agregar usuario'\" />\r\n        <mensaje-inicial :titulo=\"'No se han registrado usuarios'\" :subtitulo=\"'Agrega algunos usuarios'\" v-if=\"usuarios.length < 1\" />\r\n        <b-table\r\n        :data=\"usuarios\">\r\n            <b-table-column field=\"usuario\" label=\"Nombre de usuario\" sortable searchable v-slot=\"props\">\r\n                {{ props.row.usuario }}\r\n            </b-table-column>\r\n\r\n            <b-table-column field=\"nombre\" label=\"Nombre completo\" sortable searchable v-slot=\"props\">\r\n                {{ props.row.nombre }}\r\n            </b-table-column>\r\n\r\n            <b-table-column field=\"telefono\" label=\"Teléfono\" sortable searchable v-slot=\"props\">\r\n                {{ props.row.telefono }}\r\n            </b-table-column>\r\n\r\n            <b-table-column field=\"eliminar\" label=\"Eliminar\" v-slot=\"props\">\r\n                <b-button type=\"is-danger\" icon-left=\"delete\" @click=\"eliminar(props.row.id)\">Eliminar</b-button>\r\n            </b-table-column>\r\n\r\n            <b-table-column field=\"editar\" label=\"Editar\" v-slot=\"props\">\r\n                <b-button type=\"is-info\" icon-left=\"pen\" @click=\"editar(props.row.id)\">Editar</b-button>\r\n            </b-table-column>\r\n        </b-table>\r\n        <b-loading :is-full-page=\"true\" v-model=\"cargando\" :can-cancel=\"false\"></b-loading>\r\n    </section>\r\n</template>\r\n<script>\r\n    import MensajeInicial from '../Extras/MensajeInicial'\r\n    import NavComponent from '../Extras/NavComponent'\r\n    import HttpService from '../../Servicios/HttpService'\r\n\r\n    export default {\r\n        name: \"UsuariosComponent\",\r\n        components: { MensajeInicial, NavComponent },\r\n\r\n        data:()=>({\r\n            cargando: false,\r\n            usuarios: []\r\n        }),\r\n\r\n        mounted(){\r\n            this.obtenerUsuarios()\r\n        },\r\n\r\n        methods: {\r\n            async eliminar(idUsuario){\r\n                this.$buefy.dialog.confirm({\r\n                    title: 'Eliminar usuario',\r\n                    message: 'Seguro que quieres <b>eliminar</b> este usuario? Esta acción no se puede revertir.',\r\n                    confirmText: 'Sí, eliminar',\r\n                    cancelText: 'Cancelar',\r\n                    type: 'is-danger',\r\n                    hasIcon: true,\r\n                    onConfirm: () => {\r\n                        this.cargando = true\r\n                        HttpService.eliminar('usuarios.php',{\r\n                            accion: 'eliminar',\r\n                            id: idUsuario\r\n                        })\r\n                        .then(resultado => {\r\n                            if(!resultado) {\r\n                                this.$buefy.toast.open('Error al eliminar')\r\n                                this.cargando = false\r\n                                return\r\n                            }\r\n\r\n                            if(resultado){\r\n                                this.cargando = false\r\n                                this.$buefy.toast.open({\r\n                                    type: 'is-info',\r\n                                    message: 'Usuario eliminado.'\r\n                                })\r\n                                this.obtenerUsuarios()\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n\r\n            editar(idUsuario){\r\n                this.$router.push({\r\n                    name: \"EditarUsuario\",\r\n                    params: { id: idUsuario}\r\n                })\r\n            },\r\n\r\n            obtenerUsuarios(){\r\n                this.cargando = true\r\n                let payload = {\r\n                    accion: 'obtener'\r\n                }\r\n                HttpService.obtenerConConsultas('usuarios.php', payload)\r\n                .then(usuarios => {\r\n                    this.usuarios = usuarios\r\n                    this.cargando = false\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>"]},"metadata":{},"sourceType":"module"}